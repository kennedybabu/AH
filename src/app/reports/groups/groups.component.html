<app-pagetitle title="Reports" [breadcrumbItems]="breadCrumbItems" [breadcrumbItems]="breadCrumbItems"></app-pagetitle>

<div>
    <div class="card">
        <div class="card-body">
            <form [formGroup]="searchForm">
                <div class="row">
                  <div class="col-md-3">
                  <div class="form-group">
                    <ng-select [items]="counties"  (change)="subCounties()"  [virtualScroll]="true" bindLabel="name"  [multiple]="true" bindValue="county_id"
                    placeholder="Select County" formControlName="countyId">
                    </ng-select>                    
                  </div>
                  </div>
                  <div class="col-md-3">
                    <div class="form-group">
                      <ng-select [items]="sub_counties"  (change)="getWards()"  [virtualScroll]="true" bindLabel="name" [multiple]="true" bindValue="subCountyId"
                      placeholder="Select Sub County" formControlName="subCountyId">
                      </ng-select>            
                    </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-group">
                        <ng-select [items]="wards"  [virtualScroll]="true" bindLabel="name"  [multiple]="true" bindValue="wardId"
                        placeholder="Select Ward" formControlName="wardId">
                        </ng-select>
                        
                      </div>
                    </div>
                    <div class="col-sm-1">
                      <button type="button" (click)="search()"  class="btn gradient-mint"> <i class="ft-search mr-1"></i>Search</button>
                    </div>
                  <div class="col-sm-7"></div>
                
                  </div>
              </form>
        </div>
    </div>

    <div class="card">
        <!-- <div class="card-body"> -->
            <ngx-datatable 
                #table
                class="bootstrap no-detail-row"
                [rows]="groups" 
                [rowHeight]="50" 
                class="bootstrap core-bootstrap" 
                [columnMode]="ColumnMode.force" 
                [headerHeight]="50" 
                [footerHeight]="50" 
                [externalPaging]="true"
                [count]="groups.length"
                [offset]="dataParams.page_num" 
                [limit]="dataParams.page_size"
                (page)="setPage($event)" >
            <ngx-datatable-column name="Name" prop="group_name"></ngx-datatable-column>
            <ngx-datatable-column name="Description"  prop="description" ></ngx-datatable-column>				
            <ngx-datatable-column name="Edit"  prop="edit">
                <ng-template let-row="row" ngx-datatable-cell-template >
                <button (click)="edit(row)" class="round" class="btn btn-sm btn-warning"> <i class="fa-solid fa-user-tag"></i> Details</button>
                  </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Delete"  prop="edit">
              <ng-template let-row="row" ngx-datatable-cell-template >
              <button (click)="viewGroupDetails(row)" class="round" class="btn btn-sm btn-danger"> <i class="fa-solid fa-user-group"></i> View Members</button>
                </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>   
        <!-- </div> -->
    </div>
</div>
